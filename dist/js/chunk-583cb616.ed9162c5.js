(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-583cb616"],{"480a":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"bar01",staticClass:"mycharts"})},n=[],r=(a("b0c0"),{name:"bar01",props:{chartdata:Object},mounted:function(){this.drawLine()},methods:{drawLine:function(){var e=this.$echarts.init(this.$refs.bar01);e.showLoading();var t=this;e.setOption({title:{text:t.chartdata.name},xAxis:{data:t.chartdata.xAxisdata,nameTextStyle:{color:"#888888"},nameRotate:"30",splitLine:{show:!0}},tooltip:{trigger:"axis",axisPointer:{type:"shadow",label:{show:!1}}},toolbox:{show:!0,feature:{mark:{show:!0},dataView:{show:!0,readOnly:!0},magicType:{show:!0,type:["pie","funnel"]}}},yAxis:{type:"value",name:"条",splitNumber:1},series:[{barMaxWidth:20,name:t.chartdata.seriesname,type:"bar",data:t.chartdata.seriesdata}],color:["#224abe","#3265ff","#6c91ff","#9bb4ff"]}),e.hideLoading()}}}),s=r,o=a("2877"),l=Object(o["a"])(s,i,n,!1,null,"6ba8629a",null);t["a"]=l.exports},5096:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"pie01",staticClass:"mycharts"})},n=[],r=(a("b0c0"),{name:"pie01",props:{pie01data:Object},mounted:function(){this.drawLine()},methods:{drawLine:function(){var e=this.$echarts.init(this.$refs.pie01);e.showLoading();var t=this;console.log(t.pie01data),e.setOption({title:{text:t.pie01data.name,top:"3%",left:"3%",textStyle:{color:"#888888"}},tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},toolbox:{show:!0,feature:{mark:{show:!0},dataView:{show:!0,readOnly:!0},magicType:{show:!0,type:["pie","funnel"]}}},series:[{name:t.pie01data.name2,type:"pie",radius:"40%",label:{show:!1},emphasis:{label:{show:!0}},labelLine:{show:!0},data:t.pie01data.data}]}),e.hideLoading(),e.on("click",(function(e){console.log(e)}))}}}),s=r,o=a("2877"),l=Object(o["a"])(s,i,n,!1,null,"1e83ee57",null);t["a"]=l.exports},"7a9b":function(e,t,a){},"7ebd":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"card"},[a("div",{staticClass:"card-header"},[e._t("header")],2),a("div",{staticClass:"card-body"},[e._t("body")],2),a("div",{staticClass:"card-footer"},[e._t("footer")],2)])},n=[],r={name:"BaseCard"},s=r,o=(a("d13f"),a("2877")),l=Object(o["a"])(s,i,n,!1,null,"2f50af30",null);t["a"]=l.exports},"948d":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("BaseCard2",[a("div",{attrs:{slot:"header"},slot:"header"},[a("villageSearch",{on:{searchFeedback:e.Search}})],1),a("div",{attrs:{slot:"body"},slot:"body"},[a("div",{staticClass:"flexbox"},[a("div",{staticClass:"flexsize1"},[a("pie02",{key:e.reloadpiepro,attrs:{pie02data:e.piedatapro}})],1),a("div",{staticClass:"flexsize1"},[a("bar01",{key:e.reloadbar,attrs:{chartdata:e.chartdatabar}})],1)])])]),"1"===e.$store.state.level?a("SuggestionArea"):e._e()],1)},n=[],r=(a("4160"),a("a9e3"),a("159b"),a("1bab")),s=a("7ebd"),o=a("ea2c"),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._v(" "+e._s(e.areaname)+": "),1!=e.$store.state.level?a("el-select",{attrs:{disabled:"",size:e.size,placeholder:"请选择镇/街道"},model:{value:e.townid,callback:function(t){e.townid=t},expression:"townid"}},e._l(e.towns,(function(e){return a("el-option",{key:"town"+e.id,attrs:{label:e.zhenName,value:e.zhenid}})})),1):a("el-select",{attrs:{size:e.size,placeholder:"请选择镇/街道"},model:{value:e.townid,callback:function(t){e.townid=t},expression:"townid"}},e._l(e.towns,(function(e){return a("el-option",{key:"town"+e.id,attrs:{label:e.name,value:e.id}})})),1),a("el-select",{attrs:{size:e.size,placeholder:"请选择行政村"},model:{value:e.villageid,callback:function(t){e.villageid=t},expression:"villageid"}},e._l(e.villages,(function(e){return a("el-option",{key:"village"+e.id,attrs:{label:e.name,value:e.id}})})),1),a("el-date-picker",{attrs:{size:e.size,type:"monthrange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始月份","end-placeholder":"结束月份","picker-options":e.pickerOptions,change:"changetime"},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}}),a("el-button",{attrs:{type:"primary",size:e.size},on:{click:e.onSubmit}},[e._v("搜索")])],1)},c=[],d=(a("d81d"),a("b0c0"),a("d3b7"),a("25f0"),{name:"SearchFeedback",data:function(){return{size:"mini",townid:"0",villages:[],villageid:"0",time:"",pickerOptions:{shortcuts:[{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近一年",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-31536e6),e.$emit("pick",[a,t])}}]}}},computed:{areaid:function(){return Number(this.$store.state.areaid)},areaname:function(){return this.$store.state.areaname},towns:function(){var e=this.$store.state.towns.map((function(e){return{id:e.zhenid.toString(),name:e.zhenName}}));return e}},created:function(){this.townid=this.$store.state.townid.toString(),this.villageid=this.$store.state.villageid.toString(),this.getvillages(this.townid);var e=new Date,t=new Date;t.setTime(t.getTime()-1296e7),this.time=[t,e],this.onSubmit()},methods:{gettowns:function(e){Object(r["p"])({join:"area",s:{"area.id":{$eq:Number(e)}}}).then((function(e){console.log(e)}))},getvillages:function(e){var t=this;Object(r["w"])({join:"town",s:{"town.id":{$eq:Number(e)}}}).then((function(e){t.villages=e.map((function(e){return{id:e.id.toString(),name:e.name}}))}))},onSubmit:function(){this.$emit("searchFeedback",this.villageid,this.time)}},watch:{townid:function(e){this.getvillages(this.townid)},time:function(e){}}}),u=d,h=a("2877"),p=Object(h["a"])(u,l,c,!1,null,null,null),m=p.exports,f=a("5096"),b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"pie02",staticClass:"mycharts"})},v=[],g={name:"pie02",props:{pie02data:Object},mounted:function(){this.drawLine()},methods:{drawLine:function(){var e=this.$echarts.init(this.$refs.pie02);e.showLoading();var t=this;e.setOption({title:{text:t.pie02data.name,top:"3%",left:"3%",textStyle:{color:"#888888"}},tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)条"},toolbox:{show:!0,feature:{mark:{show:!0},dataView:{show:!0,readOnly:!0},magicType:{show:!0,type:["pie","funnel"]}}},series:[{name:t.pie02data.name2,type:"pie",radius:["40%","48%"],label:{show:!1},emphasis:{label:{show:!0}},labelLine:{show:!0},data:t.pie02data.data,animationEasing:"elasticOut",animationDelay:function(e){return 200*Math.random()}}],color:["#224abe","orange"]}),e.hideLoading(),e.on("click",(function(e){console.log(e)}))}}},w=g,y=Object(h["a"])(w,b,v,!1,null,"8a0fba3e",null),x=y.exports,k=a("480a"),$=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("BaseCard2",[a("div",{attrs:{slot:"header"},slot:"header"},[e._v(" 全区群众意见建议柱状图 ")]),a("div",{attrs:{slot:"body"},slot:"body"},[a("bar01",{key:e.reloadbar,attrs:{chartdata:e.chartdatabar}})],1)])},_=[],O={name:"SuggestionArea",components:{BaseCard2:o["a"],bar01:k["a"]},data:function(){return{chartdatabar:{name:"群众意见建议柱状图",seriesname:"条"},reloadbar:""}},created:function(){var e=this;Object(r["e"])().then((function(t){console.log(t);var a=[],i=[];t.forEach((function(e){a.push(e.name);var t=0;e.village.forEach((function(e){t+=e.feedback.length})),i.push(t)})),e.$set(e.chartdatabar,"seriesdata",i),e.$set(e.chartdatabar,"xAxisdata",a),e.reloadbar=(new Date).getTime()})).catch((function(t){e.$set(e.chartdatabar,"seriesdata",[]),e.$set(e.chartdatabar,"xAxisdata",[])}))}},C=O,S=Object(h["a"])(C,$,_,!1,null,null,null),j=S.exports,z={name:"Suggestions",data:function(){return{villageid:"",time:"",reloadpietype:"type",reloadpiepro:"pro",reloadbar:"bar",chartdatabar:{name:"反馈量类型柱状图",xAxisdata:["资金","资产","资源","党务","村务","其他"],seriesname:"反馈量"},piedatapro:{name:"反馈量处理情况占比图",name2:"反馈量"}}},components:{BaseCard:s["a"],BaseCard2:o["a"],villageSearch:m,pie01:f["a"],pie02:x,bar01:k["a"],SuggestionArea:j},created:function(){console.log("1"===this.$store.state.level)},methods:{Search:function(e,t){this.villageid=e,this.time=t,this.getChartData()},getChartData:function(){var e=this;Object(r["d"])({fields:"type,processed",join:"village",s:{"village.id":{$eq:Number(this.villageid)},createdAt:{$between:[new Date(this.time[0]).toISOString(),new Date(this.time[1]).toISOString()]}}}).then((function(t){console.log(t);var a=[{value:0,name:"已处理"},{value:0,name:"未处理"}],i=[0,0,0,0,0,0];t.forEach((function(t){switch(t.processed){case!0:a[0].value++;break;case!1:a[1].value++;break;default:break}i[t.type]++,console.log(a),e.$set(e.piedatapro,"data",a),e.$set(e.chartdatabar,"seriesdata",i),e.reloadpiepro=(new Date).getTime(),e.reloadbar=(new Date).getTime()}))}))}}},L=z,D=Object(h["a"])(L,i,n,!1,null,null,null);t["default"]=D.exports},a2ef:function(e,t,a){"use strict";var i=a("7a9b"),n=a.n(i);n.a},d13f:function(e,t,a){"use strict";var i=a("f25b"),n=a.n(i);n.a},d81d:function(e,t,a){"use strict";var i=a("23e7"),n=a("b727").map,r=a("1dde"),s=a("ae40"),o=r("map"),l=s("map");i({target:"Array",proto:!0,forced:!o||!l},{map:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})},ea2c:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"card"},[a("div",{staticClass:"card-header"},[e._t("header")],2),a("div",{staticClass:"card-body"},[e._t("body")],2)])},n=[],r={name:"BaseCard2"},s=r,o=(a("a2ef"),a("2877")),l=Object(o["a"])(s,i,n,!1,null,"054593fc",null);t["a"]=l.exports},f25b:function(e,t,a){}}]);