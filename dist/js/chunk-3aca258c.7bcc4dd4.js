(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3aca258c"],{"118b":function(e,t,a){},"3ca3":function(e,t,a){"use strict";var i=a("6547").charAt,n=a("69f3"),s=a("7dd0"),r="String Iterator",o=n.set,l=n.getterFor(r);s(String,"String",(function(e){o(this,{type:r,string:String(e),index:0})}),(function(){var e,t=l(this),a=t.string,n=t.index;return n>=a.length?{value:void 0,done:!0}:(e=i(a,n),t.index+=e.length,{value:e,done:!1})}))},7984:function(e,t,a){"use strict";var i=a("b0cd"),n=a.n(i);n.a},"7a9b":function(e,t,a){},"9bbc":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"pie02",staticClass:"mycharts"})},n=[],s=(a("b0c0"),{name:"pie02",props:{pie02data:Object},mounted:function(){this.drawLine()},methods:{drawLine:function(){var e=this.$echarts.init(this.$refs.pie02);e.showLoading();var t=this;e.setOption({title:{text:t.pie02data.name,textStyle:{color:"#888888"}},legend:{orient:"vertical",right:0,top:40,data:t.pie02data.name2},tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},toolbox:{show:!0,feature:{mark:{show:!0},dataView:{show:!0,readOnly:!0},magicType:{show:!0,type:["pie","funnel"]}}},series:[{name:t.pie02data.name3,type:"pie",right:"20",radius:["40%","48%"],label:{show:!1},emphasis:{label:{show:!0}},labelLine:{show:!0},data:t.pie02data.data,animationEasing:"elasticOut",animationDelay:function(e){return 200*Math.random()}}],color:["#224abe","orange","rgb(28,200,138)","rgb(54,185,204)","#e74a3b","#858796"]}),e.hideLoading(),e.on("click",(function(e){console.log(e)}))}}}),r=s,o=a("2877"),l=Object(o["a"])(r,i,n,!1,null,"94a09ff4",null);t["a"]=l.exports},a2ef:function(e,t,a){"use strict";var i=a("7a9b"),n=a.n(i);n.a},a434:function(e,t,a){"use strict";var i=a("23e7"),n=a("23cb"),s=a("a691"),r=a("50c4"),o=a("7b0b"),l=a("65f0"),c=a("8418"),d=a("1dde"),u=a("ae40"),h=d("splice"),p=u("splice",{ACCESSORS:!0,0:0,1:2}),m=Math.max,f=Math.min,v=9007199254740991,g="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!h||!p},{splice:function(e,t){var a,i,d,u,h,p,b=o(this),w=r(b.length),y=n(e,w),k=arguments.length;if(0===k?a=i=0:1===k?(a=0,i=w-y):(a=k-2,i=f(m(s(t),0),w-y)),w+a-i>v)throw TypeError(g);for(d=l(b,i),u=0;u<i;u++)h=y+u,h in b&&c(d,u,b[h]);if(d.length=i,a<i){for(u=y;u<w-i;u++)h=u+i,p=u+a,h in b?b[p]=b[h]:delete b[p];for(u=w;u>w-i+a;u--)delete b[u-1]}else if(a>i)for(u=w-i;u>y;u--)h=u+i-1,p=u+a-1,h in b?b[p]=b[h]:delete b[p];for(u=0;u<a;u++)b[u+y]=arguments[u+2];return b.length=w-i+a,d}})},ae3b:function(e,t,a){"use strict";var i=a("118b"),n=a.n(i);n.a},b0cd:function(e,t,a){},b8df:function(e,t,a){},bc93:function(e,t,a){"use strict";var i=a("b8df"),n=a.n(i);n.a},d81d:function(e,t,a){"use strict";var i=a("23e7"),n=a("b727").map,s=a("1dde"),r=a("ae40"),o=s("map"),l=r("map");i({target:"Array",proto:!0,forced:!o||!l},{map:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})},ddb0:function(e,t,a){var i=a("da84"),n=a("fdbc"),s=a("e260"),r=a("9112"),o=a("b622"),l=o("iterator"),c=o("toStringTag"),d=s.values;for(var u in n){var h=i[u],p=h&&h.prototype;if(p){if(p[l]!==d)try{r(p,l,d)}catch(f){p[l]=d}if(p[c]||r(p,c,u),n[u])for(var m in s)if(p[m]!==s[m])try{r(p,m,s[m])}catch(f){p[m]=s[m]}}}},defa:function(e,t,a){"use strict";a.r(t);var i,n,s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[0===e.$store.state.level?a("fankuisum"):a("sugtown")],1)},r=[],o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"fankuisum"},[a("h4",[a("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}}),e._v(" 全区群众意见建议总量 "),a("span",{},[e._v("已处理反馈："),a("b",{staticClass:"yes"},[e._v(e._s(e.fkycl))]),e._v("条")]),e._v(" "),a("span",{},[e._v("未处理反馈："),a("b",{staticClass:"no"},[e._v(e._s(e.fkwcl))]),e._v("条")])],1)]),a("div",{staticStyle:{"margin-bottom":"16px"}},[a("el-row",{attrs:{gutter:10}},e._l(8,(function(t){return a("el-col",{key:"item"+t,attrs:{span:6}},[a("card",[a("p",{staticClass:"title",attrs:{slot:"title"},slot:"title"},[a("span",[e._v(e._s(e.chartDate.dataname[t-1]))])]),a("p",{staticClass:"main",attrs:{slot:"main"},slot:"main"},[a("a",[a("span",{staticClass:"yes",on:{click:function(a){return a.stopPropagation(),e.gofktable({type:"true",townid:e.townids[t-1]})}}},[e._v("已处理："+e._s(e.chartDate.data1[t-1])+"条")])]),a("a",[a("span",{staticClass:"no",on:{click:function(a){return a.stopPropagation(),e.gofktable({type:"false",townid:e.townids[t-1]})}}},[e._v("未处理："+e._s(e.chartDate.data2[t-1])+"条")])])])])],1)})),1)],1),a("el-row",[a("el-col",{attrs:{span:16}},[a("BaseCard2",[a("div",{attrs:{slot:"header"},slot:"header"},[e._v("本月各镇街道反馈处理柱状图")]),a("div",{attrs:{slot:"body"},slot:"body"},[a("div",{staticStyle:{height:"80vh"}},[a("bar02",{key:e.reloadbar02,attrs:{chartDate:e.chartDate}})],1)])])],1),a("el-col",{attrs:{span:8}},[a("BaseCard2",[a("div",{attrs:{slot:"header"},slot:"header"},[e._v("本月全区意见建议处理情况占比图")]),a("div",{attrs:{slot:"body"},slot:"body"},[a("div",{staticStyle:{height:"33vh"}},[a("pie02",{key:e.reloadpie02,attrs:{pie02data:e.pie02data}})],1)])]),a("BaseCard2",[a("div",{attrs:{slot:"header"},slot:"header"},[e._v("本月全区意见建议类型占比图")]),a("div",{attrs:{slot:"body"},slot:"body"},[a("div",{staticStyle:{height:"33vh"}},[a("pie01",{key:e.reloadpie01,attrs:{pie01data:e.pie01data}})],1)])])],1)],1)],1)},l=[],c=(a("4160"),a("159b"),a("5530")),d=a("1bab"),u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"cb",staticStyle:{"border-left":"4px solid rgb(46,85,199)"}},[a("div",{staticClass:"cordbody"},[e._t("title")],2),a("div",[e._t("main")],2)])},h=[],p={name:"card",data:function(){return{borderColor:["cornflowerblue","rgb(46,85,199)","#92fcd7","#7f2ac9","#0242e3"]}},computed:{colorIndex:function(){return Math.floor(5*Math.random())}}},m=p,f=(a("bc93"),a("2877")),v=Object(f["a"])(m,u,h,!1,null,"41c6e554",null),g=v.exports,b={},w=Object(f["a"])(b,i,n,!1,null,null,null),y=w.exports,k=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"bar02",staticClass:"charts"})},_=[],D={name:"bar02",props:{chartDate:Object},mounted:function(){this.drawLine()},methods:{drawLine:function(){var e=this.$echarts.init(this.$refs.bar02);e.showLoading();var t=this;e.setOption({tooltip:{trigger:"axis",axisPointer:{type:"shadow",label:{show:!1}}},legend:{data:t.chartDate.legenddata,right:"6%"},grid:{left:"6%",right:"6%",bottom:"5%",containLabel:!0},yAxis:{type:"category",splitLine:{show:!0},inverse:!0,nameGap:40,data:t.chartDate.dataname,axisLine:{lineStyle:{color:"#999"}},axisTick:{lineStyle:{color:"#999"}}},xAxis:{type:"value",name:"条",axisLine:{lineStyle:{color:"#999"}},axisTick:{lineStyle:{color:"#999"}},splitLine:{show:!0}},series:[{name:t.chartDate.legenddata[0],type:"bar",barMaxWidth:16,itemStyle:{emphasis:{barBorderRadius:10},normal:{barBorderRadius:10,shadowColor:"#cccccc",shadowBlur:20}},label:{normal:{show:!0,position:"right"}},data:t.chartDate.data1},{name:t.chartDate.legenddata[1],type:"bar",barMaxWidth:16,itemStyle:{emphasis:{barBorderRadius:5},normal:{barBorderRadius:10,shadowColor:"#cccccc",shadowBlur:10}},label:{normal:{show:!0,position:"right"}},data:t.chartDate.data2}],color:["#224abe","#9bb4ff"]}),e.hideLoading(),e.on("click",(function(e){console.log(e)})),window.addEventListener("resize",(function(){e.resize()}))}}},$=D,x=Object(f["a"])($,k,_,!1,null,"6a23d7f4",null),C=x.exports,S=a("ea2c"),T=a("9bbc"),O=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"pie04",staticClass:"mycharts"})},j=[],L=(a("b0c0"),{name:"pie04",props:{pie01data:Object},mounted:function(){this.drawLine()},methods:{drawLine:function(){var e=this.$echarts.init(this.$refs.pie04);e.showLoading();var t=this;console.log(t.pie01data),e.setOption({title:{text:t.pie01data.name,top:"3%",left:"3%",textStyle:{color:"#888888"}},legend:{orient:"vertical",right:0,top:40,data:t.pie01data.legenddata},tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},toolbox:{show:!0,feature:{mark:{show:!0},dataView:{show:!0,readOnly:!0},magicType:{show:!0,type:["pie","funnel"]}}},series:[{name:t.pie01data.name2,type:"pie",radius:"40%",label:{show:!1},emphasis:{label:{show:!0}},labelLine:{show:!0},data:t.pie01data.data}],color:["#224abe","#9bb4ff"]}),e.hideLoading(),e.on("click",(function(e){console.log(e)}))}}}),E=L,B=Object(f["a"])(E,O,j,!1,null,null,null),A=B.exports,M={name:"fankuisum",components:{card:g,gujia:y,bar02:C,BaseCard2:S["a"],pie02:T["a"],pie01:A},data:function(){return{townids:[],chartDate:{title:"",legenddata:["已处理","未处理"]},reloadbar02:"",pie02data:{name2:["资金","资产","资源","党务","村务","其他"],name3:"条数"},reloadpie02:"",pie01data:{name2:"条",legenddata:["已处理","未处理"]},reloadpie01:"pie01",fkycl:0,fkwcl:0,showgujia:!0,gj:4,items:[],time:"",endtime:"",pickerOptions:{shortcuts:[{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近半年",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-15552e6),e.$emit("pick",[a,t])}},{text:"最近一年",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-31536e6),e.$emit("pick",[a,t])}}],disabledDate:function(e){return e.getTime()>(new Date).getTime()}}}},created:function(){var e=new Date;this.endtime=new Date(e.getTime()+864e5);var t=new Date;t.setTime(t.getTime()-2592e6),this.time=[t,e]},methods:{getfeedback:function(){var e=this;Object(d["f"])({join:"village,village.feedback",s:{"village.feedback.createdAt":{$between:[new Date(this.time[0]).toISOString(),new Date(this.endtime.toISOString())]},"village.feedback.deleteAt":null}}).then((function(t){console.log(t);var a=[{value:0,name:"资金"},{value:0,name:"资产"},{value:0,name:"资源"},{value:0,name:"党务"},{value:0,name:"村务"},{value:0,name:"其他"}],i=[],n=[],s=[];e.fkycl=0,e.fkwcl=0;for(var r=function(r,o){i.push(e.$store.state.towns[r].zhenName),e.townids.push(e.$store.state.towns[r].zhenid),t.forEach((function(t){if(e.$store.state.towns[r].zhenid===t.id){var i=0,o=0;t.village.forEach((function(t){for(var n=0,s=t.feedback.length;n<s;n++)t.feedback[n].processed?(i++,e.fkycl++):(o++,e.fkwcl++),a[t.feedback[n].type].value++})),n.push(i),s.push(o)}})),n.length<i.length&&(n.push(0),s.push(0))},o=0,l=e.$store.state.towns.length;o<l;o++)r(o,l);e.$set(e.chartDate,"dataname",i),e.$set(e.chartDate,"data1",n),e.$set(e.chartDate,"data2",s),e.$set(e.pie02data,"data",a);var c=[{value:e.fkycl,name:"已处理"},{value:e.fkwcl,name:"未处理"}];e.$set(e.pie01data,"data",c),e.reloadbar02=(new Date).getTime(),e.reloadpie02=(new Date).getTime()}))},gofktable:function(e){this.$store.commit("set_fktownid",e.townid),this.$router.push({path:"/home/suggestion/sugtable",query:Object(c["a"])({},e)})}},watch:{time:function(e){console.log(e),this.getfeedback()}}},z=M,I=(a("ae3b"),Object(f["a"])(z,o,l,!1,null,"3a6ff05e",null)),q=I.exports,R=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"fankuisum"},[a("h3",[a("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}}),e._v(" "+e._s(e.$store.state.townname)+"群众意见建议总量 "),a("span",{},[e._v("已处理反馈："),a("b",{staticClass:"yes"},[e._v(e._s(e.fkycl))]),e._v("条")]),e._v(" "),a("span",{},[e._v("未处理反馈："),a("b",{staticClass:"no"},[e._v(e._s(e.fkwcl))]),e._v("条")])],1)]),a("div",{staticStyle:{"margin-bottom":"16px"}},[a("el-row",{attrs:{gutter:10}},e._l(e.itemlength,(function(t){return a("el-col",{key:"item"+t,attrs:{span:e.itemspan}},[a("card",[a("p",{staticClass:"title",attrs:{slot:"title"},slot:"title"},[a("span",[e._v(e._s(e.chartDate.dataname[t-1]))])]),a("p",{staticClass:"main",attrs:{slot:"main"},slot:"main"},[a("router-link",{attrs:{to:{path:"/home/suggestion/sugtable",query:{type:"true",villageid:e.villageids[t-1]}}}},[a("span",{staticClass:"yes"},[e._v("已处理："+e._s(e.chartDate.data1[t-1])+"条")])]),a("router-link",{attrs:{to:{path:"/home/suggestion/sugtable",query:{type:"false",villageid:e.villageids[t-1]}}}},[a("span",{staticClass:"no"},[e._v("未处理："+e._s(e.chartDate.data2[t-1])+"条")])])],1)])],1)})),1)],1),a("el-row",[a("el-col",{attrs:{span:16}},[a("BaseCard2",[a("div",{attrs:{slot:"header"},slot:"header"},[e._v("本月"+e._s(e.$store.state.townname)+"反馈处理柱状图")]),a("div",{attrs:{slot:"body"},slot:"body"},[a("div",{staticStyle:{height:"80vh"}},[a("bar02",{key:e.reloadbar02,attrs:{chartDate:e.chartDate}})],1)])])],1),a("el-col",{attrs:{span:8}},[a("BaseCard2",[a("div",{attrs:{slot:"header"},slot:"header"},[e._v("本月"+e._s(e.$store.state.townname)+"意见建议处理情况占比图")]),a("div",{attrs:{slot:"body"},slot:"body"},[a("div",{staticStyle:{height:"33vh"}},[a("pie02",{key:e.reloadpie02,attrs:{pie02data:e.pie02data}})],1)])]),a("BaseCard2",[a("div",{attrs:{slot:"header"},slot:"header"},[e._v("本月"+e._s(e.$store.state.townname)+"意见建议类型占比图")]),a("div",{attrs:{slot:"body"},slot:"body"},[a("div",{staticStyle:{height:"33vh"}},[a("pie01",{key:e.reloadpie01,attrs:{pie01data:e.pie01data}})],1)])])],1)],1)],1)},P=[],N=(a("d81d"),a("a434"),a("a9e3"),a("d3b7"),a("25f0"),a("3ca3"),a("ddb0"),{name:"fankuisum",components:{card:g,gujia:y,bar02:C,BaseCard2:S["a"],pie02:T["a"],pie01:A},data:function(){return{itemspan:6,itemlength:0,villageids:[],villagenames:[],chartDate:{title:"",legenddata:["已处理","未处理"]},reloadbar02:"",pie02data:{name2:["资金","资产","资源","党务","村务","其他"],name3:"条数"},reloadpie02:"",pie01data:{name2:"条",legenddata:["已处理","未处理"]},reloadpie01:"pie01",fkycl:0,fkwcl:0,showgujia:!0,gj:4,items:[],time:"",endtime:"",pickerOptions:{shortcuts:[{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近半年",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-15552e6),e.$emit("pick",[a,t])}},{text:"最近一年",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-31536e6),e.$emit("pick",[a,t])}}],disabledDate:function(e){return e.getTime()>(new Date).getTime()}}}},computed:{townid:function(){return this.$store.state.townid.toString()}},created:function(){var e=new Date;this.endtime=new Date(e.getTime()+864e5);var t=new Date;t.setTime(t.getTime()-2592e6),this.time=[t,e]},methods:{getfeedback:function(){var e=this;Object(d["z"])({join:"town",fields:"id,name",s:{"town.id":{$eq:Number(this.townid)}}}).then((function(t){e.villageids.splice(0),e.villagenames.splice(0),e.itemlength=t.length;var a=t.map((function(t){return e.villageids.push(t.id),e.villagenames.push(t.name),Object(d["e"])({fields:"type,processed",join:"village",s:{"village.id":{$eq:Number(t.id)},createdAt:{$between:[new Date(e.time[0]).toISOString(),new Date(e.endtime.toISOString())]}}})}));Promise.all(a).then((function(t){console.log(t);var a=[{value:0,name:"资金"},{value:0,name:"资产"},{value:0,name:"资源"},{value:0,name:"党务"},{value:0,name:"村务"},{value:0,name:"其他"}],i=[],n=[];e.fkycl=0,e.fkwcl=0,t.forEach((function(t){var s=0,r=0;t.forEach((function(t){t.processed?(s++,e.fkycl++):(r++,e.fkwcl++),a[t.type].value++})),i.push(s),n.push(r)})),e.$set(e.chartDate,"dataname",e.villagenames),e.$set(e.chartDate,"data1",i),e.$set(e.chartDate,"data2",n),e.$set(e.pie02data,"data",a);var s=[{value:e.fkycl,name:"已处理"},{value:e.fkwcl,name:"未处理"}];e.$set(e.pie01data,"data",s),e.reloadbar02=(new Date).getTime(),e.reloadpie02=(new Date).getTime(),e.reloadpie01=(new Date).getTime()}))}))}},watch:{time:function(e){console.log(e),this.getfeedback()}}}),J=N,V=(a("7984"),Object(f["a"])(J,R,P,!1,null,"e1698222",null)),W=V.exports,F={name:"suggestion",components:{fankuisum:q,sugtown:W}},G=F,H=Object(f["a"])(G,s,r,!1,null,null,null);t["default"]=H.exports},ea2c:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"card"},[a("div",{staticClass:"card-header"},[e._t("header")],2),a("div",{staticClass:"card-body"},[e._t("body")],2)])},n=[],s={name:"BaseCard2"},r=s,o=(a("a2ef"),a("2877")),l=Object(o["a"])(r,i,n,!1,null,"054593fc",null);t["a"]=l.exports}}]);