(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4bcc8c87"],{"421a":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"searchbox"},[a("div",{staticClass:"searchobj"},[a("label",{attrs:{for:""}},[t._v(" "+t._s(t.areaname)+": "),0!=t.$store.state.level?a("el-select",{attrs:{disabled:"",size:t.size,placeholder:"请选择镇/街道"},model:{value:t.townid,callback:function(e){t.townid=e},expression:"townid"}},t._l(t.towns,(function(t){return a("el-option",{key:"town"+t.id,attrs:{label:t.name,value:t.id}})})),1):a("el-select",{attrs:{size:t.size,placeholder:"请选择镇/街道"},model:{value:t.townid,callback:function(e){t.townid=e},expression:"townid"}},t._l(t.towns,(function(t){return a("el-option",{key:"town"+t.id,attrs:{label:t.name,value:t.id}})})),1)],1),a("label",{attrs:{for:""}},[t._v(" 村： "),a("el-select",{attrs:{size:t.size,placeholder:"请选择行政村"},model:{value:t.villageid,callback:function(e){t.villageid=e},expression:"villageid"}},t._l(t.villages,(function(t){return a("el-option",{key:"village"+t.id,attrs:{label:t.name,value:t.id}})})),1)],1)]),a("div",[a("el-button",{attrs:{type:"primary",size:t.size},on:{click:t.onSubmit}},[t._v("搜索")])],1)])},n=[],l=(a("d81d"),a("b0c0"),a("a9e3"),a("d3b7"),a("25f0"),a("1bab")),s={name:"SearchFeedback",data:function(){return{size:"medium",townid:"0",villages:[],villageid:"0"}},computed:{areaid:function(){return Number(this.$store.state.areaid)},areaname:function(){return this.$store.state.areaname},towns:function(){var t=this.$store.state.towns.map((function(t){return{id:t.zhenid.toString(),name:t.zhenName}}));return t}},created:function(){this.townid=this.$store.state.townid.toString(),this.villageid=this.$store.state.villageid.toString(),this.getvillages(this.townid)},methods:{gettowns:function(t){Object(l["r"])({join:"area",s:{"area.id":{$eq:Number(t)}}}).then((function(t){console.log(t)}))},getvillages:function(t){var e=this;Object(l["z"])({join:"town",s:{"town.id":{$eq:Number(t)}}}).then((function(t){0!=t.length&&(e.villageid=t[0].id.toString(),e.onSubmit()),e.villages=t.map((function(t){return{id:t.id.toString(),name:t.name}}))}))},onSubmit:function(){this.$emit("villageSearch",this.villageid)}},watch:{townid:function(t){this.villageid="",this.getvillages(this.townid)}}},r=s,o=a("2877"),c=Object(o["a"])(r,i,n,!1,null,null,null);e["a"]=c.exports},"5bbd1":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("VprojectTable")},n=[],l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("BaseCard",[a("div",{attrs:{slot:"header"},slot:"header"},[a("VillageSearch",{on:{villageSearch:t.villageSearch}})],1),a("div",{attrs:{slot:"body"},slot:"body"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%","font-size":"16px"},attrs:{type:"expand",data:t.tableData,border:"",height:"80vh"}},[a("el-table-column",{attrs:{fixed:"",prop:"name",label:"项目名",width:"200"}}),a("el-table-column",{attrs:{prop:"createdAt",sortable:"",label:"时间",width:"120"}}),a("el-table-column",{attrs:{prop:"number",label:"编号",width:"120"}}),a("el-table-column",{attrs:{prop:"projected",label:"是否立项",width:"100"}}),a("el-table-column",{attrs:{prop:"bidding",label:"是否投标",width:"100"}}),a("el-table-column",{attrs:{prop:"implement",label:"是否招标实施方",width:"100"}}),a("el-table-column",{attrs:{prop:"implementer",label:"实施方",width:"200"}}),a("el-table-column",{attrs:{prop:"acceptor",label:"验收方",width:"200"}}),a("el-table-column",{attrs:{prop:"supervisor",label:"监理方",width:"200"}}),a("el-table-column",{attrs:{prop:"deliverySituation",label:"工程款支付情况",width:"100"}}),a("el-table-column",{attrs:{prop:"remarks",label:"备注",width:"auto"}}),a("el-table-column",{attrs:{prop:"index",fixed:"right",label:"操作",width:"60"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:" medium"},on:{click:function(a){return t.handleClick(e.row)}}},[t._v("详情")])]}}])})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-pagination",{attrs:{background:"","current-page":t.currentPage,"page-sizes":[16,20,50,100],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showcard,expression:"showcard"}],staticClass:"mask",on:{click:t.hidenMask}},[a("div",{staticClass:"centerbody"},[t._t("centerbody",[a("BaseCard2",[a("div",{attrs:{slot:"header"},slot:"header"},[t._v(" "+t._s(t.itemdata.name)+" "),a("span",{staticClass:"littlespan"},[t._v(t._s(t.itemdata.createdAt))])]),a("div",{attrs:{slot:"body"},slot:"body"},[a("div",{staticClass:"cardcontent"},[a("div",{staticClass:"cardcontent"},[t._v(" 项目编号： "),a("span",[t._v(t._s(t.itemdata.number))])]),a("div",{staticClass:"cardcontent"},[t._v(" 是否立项： "),a("span",[t._v(t._s(t.itemdata.projected))])]),a("div",{staticClass:"cardcontent"},[t._v(" 是否投标： "),a("span",[t._v(t._s(t.itemdata.bidding))])]),a("div",{staticClass:"cardcontent"},[t._v(" 是否招标实施方： "),a("span",[t._v(t._s(t.itemdata.implement))])]),a("div",{staticClass:"cardcontent"},[t._v(" 实施方： "),a("span",[t._v(t._s(t.itemdata.implementer))])]),a("div",{staticClass:"cardcontent"},[t._v(" 验收方： "),a("span",[t._v(t._s(t.itemdata.acceptor))])]),a("div",{staticClass:"cardcontent"},[t._v(" 监理方 ："),a("span",[t._v(t._s(t.itemdata.supervisor))])]),a("div",{staticClass:"cardcontent"},[t._v(" 工程款支付情况 ："),a("span",[t._v(t._s(t.itemdata.deliverySituation))])]),a("div",{staticClass:"cardcontent"},[t._v(" 备注： "),a("span",[t._v(t._s(t.itemdata.remarks))])]),a("div",{staticClass:"cardcontent"},[t._v(" 相关图片： "),t.itemdata.img.length>0?a("viewer",{attrs:{images:t.itemdata.img}},t._l(t.itemdata.img,(function(e,i){return a("div",{key:i,staticClass:"img"},[a("img",{attrs:{src:e,onerror:t.errorImg}})])})),0):a("span",[t._v("无")])],1)])])])])],2)])],1)},s=[],r=(a("d81d"),a("a434"),a("b0c0"),a("a9e3"),a("1bab")),o=a("0c58"),c=a("7ebd"),d=a("ea2c"),u=a("1b72"),m=a("421a"),p={name:"VprojectTable",components:{BaseCard:c["a"],themask:u["a"],BaseCard2:d["a"],VillageSearch:m["a"]},data:function(){return{pageSize:16,currentPage:1,pageCount:1,total:0,tableData:[],itemdata:{img:[]},loading:!0,showcard:!1,villageid:""}},methods:{get_tableData:function(){var t=this;this.loading=!0,Object(r["l"])({limit:this.pageSize,page:this.currentPage,join:"village",s:{"village.id":{$eq:Number(this.villageid)}}}).then((function(e){console.log(e),t.loading=!1,t.total=e.total,t.tableData.splice(0),t.tableData=e.data.map((function(t,e){var a=null;return null!=t.relatedDocuments&&(a=t.relatedDocuments.map((function(t){return t.url}))),console.log(a),{id:t.id,index:e,number:Object(o["c"])(t.number),implement:!0===t.implement?"是":"否",name:Object(o["c"])(t.name),supervisor:Object(o["c"])(t.supervisor),remarks:Object(o["c"])(t.remarks),projected:!0===t.projected?"是":"否",implementer:Object(o["c"])(t.implementer),deliverySituation:Object(o["c"])(t.deliverySituation),bidding:!0===t.bidding?"是":"否",acceptor:Object(o["c"])(t.acceptor),img:a,createdAt:Object(o["a"])(new Date(t.createdAt),"yyyy-MM-dd")}}))}))},villageSearch:function(t){console.log(this.villageid),this.villageid=t,this.get_tableData()},handleClick:function(t){console.log(t.index),this.itemdata=this.tableData[Number(t.index)],this.showcard=!0},handleSizeChange:function(t){this.pageSize=Number(t),this.currentPage=1,this.page=1,this.get_tableData()},handleCurrentChange:function(t){this.currentPage=Number(t),this.page=Number(t),this.get_tableData()},hidenMask:function(){this.showcard=!1}}},v=p,b=a("2877"),h=Object(b["a"])(v,l,s,!1,null,null,null),g=h.exports,_={name:"Project",components:{VprojectTable:g}},w=_,f=Object(b["a"])(w,i,n,!1,null,null,null);e["default"]=f.exports}}]);