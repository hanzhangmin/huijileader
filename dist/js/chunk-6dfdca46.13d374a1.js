(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6dfdca46"],{1818:function(t,e,a){},"2d14":function(t,e,a){"use strict";var s=a("1818"),i=a.n(s);i.a},"33c5":function(t,e,a){},"3ca3":function(t,e,a){"use strict";var s=a("6547").charAt,i=a("69f3"),n=a("7dd0"),r="String Iterator",o=i.set,l=i.getterFor(r);n(String,"String",(function(t){o(this,{type:r,string:String(t),index:0})}),(function(){var t,e=l(this),a=e.string,i=e.index;return i>=a.length?{value:void 0,done:!0}:(t=s(a,i),e.index+=t.length,{value:t,done:!1})}))},5096:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"pie01",staticClass:"mycharts"})},i=[],n=(a("b0c0"),{name:"pie01",props:{pie01data:Object},mounted:function(){this.drawLine()},methods:{drawLine:function(){var t=this.$echarts.init(this.$refs.pie01);t.showLoading();var e=this;console.log(e.pie01data),t.setOption({title:{text:e.pie01data.name,top:"3%",left:"3%",textStyle:{color:"#888888"}},tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},toolbox:{show:!0,feature:{mark:{show:!0},dataView:{show:!0,readOnly:!0},magicType:{show:!0,type:["pie","funnel"]}}},series:[{name:e.pie01data.name2,type:"pie",radius:"40%",label:{show:!1},emphasis:{label:{show:!0}},labelLine:{show:!0},data:e.pie01data.data}],color:["#224abe","#9bb4ff","#01a068","#04d88e","#92fcd7","#c6f8e7"]}),t.hideLoading(),t.on("click",(function(t){console.log(t)}))}}}),r=n,o=a("2877"),l=Object(o["a"])(r,s,i,!1,null,"ca8e90e6",null);e["a"]=l.exports},"7a9b":function(t,e,a){},"9bbc":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"pie02",staticClass:"mycharts"})},i=[],n=(a("b0c0"),{name:"pie02",props:{pie02data:Object},mounted:function(){this.drawLine()},methods:{drawLine:function(){var t=this.$echarts.init(this.$refs.pie02);t.showLoading();var e=this;t.setOption({title:{text:e.pie02data.name,textStyle:{color:"#888888"}},legend:{orient:"vertical",right:0,top:40,data:e.pie02data.name2},tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},toolbox:{show:!0,feature:{mark:{show:!0},dataView:{show:!0,readOnly:!0},magicType:{show:!0,type:["pie","funnel"]}}},series:[{name:e.pie02data.name3,type:"pie",right:"20",radius:["40%","48%"],label:{show:!1},emphasis:{label:{show:!0}},labelLine:{show:!0},data:e.pie02data.data,animationEasing:"elasticOut",animationDelay:function(t){return 200*Math.random()}}],color:["#224abe","orange","rgb(28,200,138)","rgb(54,185,204)","#e74a3b","#858796"]}),t.hideLoading(),t.on("click",(function(t){console.log(t)}))}}}),r=n,o=a("2877"),l=Object(o["a"])(r,s,i,!1,null,"94a09ff4",null);e["a"]=l.exports},"9f7c":function(t,e,a){"use strict";var s=a("ad9a"),i=a.n(s);i.a},a2ef:function(t,e,a){"use strict";var s=a("7a9b"),i=a.n(s);i.a},a434:function(t,e,a){"use strict";var s=a("23e7"),i=a("23cb"),n=a("a691"),r=a("50c4"),o=a("7b0b"),l=a("65f0"),c=a("8418"),d=a("1dde"),u=a("ae40"),h=d("splice"),p=u("splice",{ACCESSORS:!0,0:0,1:2}),f=Math.max,m=Math.min,v=9007199254740991,b="Maximum allowed length exceeded";s({target:"Array",proto:!0,forced:!h||!p},{splice:function(t,e){var a,s,d,u,h,p,g=o(this),w=r(g.length),y=i(t,w),_=arguments.length;if(0===_?a=s=0:1===_?(a=0,s=w-y):(a=_-2,s=m(f(n(e),0),w-y)),w+a-s>v)throw TypeError(b);for(d=l(g,s),u=0;u<s;u++)h=y+u,h in g&&c(d,u,g[h]);if(d.length=s,a<s){for(u=y;u<w-s;u++)h=u+s,p=u+a,h in g?g[p]=g[h]:delete g[p];for(u=w;u>w-s+a;u--)delete g[u-1]}else if(a>s)for(u=w-s;u>y;u--)h=u+s-1,p=u+a-1,h in g?g[p]=g[h]:delete g[p];for(u=0;u<a;u++)g[u+y]=arguments[u+2];return g.length=w-s+a,d}})},ad9a:function(t,e,a){},c10f:function(t,e,a){"use strict";var s=a("33c5"),i=a.n(s);i.a},d81d:function(t,e,a){"use strict";var s=a("23e7"),i=a("b727").map,n=a("1dde"),r=a("ae40"),o=n("map"),l=r("map");s({target:"Array",proto:!0,forced:!o||!l},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},ddb0:function(t,e,a){var s=a("da84"),i=a("fdbc"),n=a("e260"),r=a("9112"),o=a("b622"),l=o("iterator"),c=o("toStringTag"),d=n.values;for(var u in i){var h=s[u],p=h&&h.prototype;if(p){if(p[l]!==d)try{r(p,l,d)}catch(m){p[l]=d}if(p[c]||r(p,c,u),i[u])for(var f in n)if(p[f]!==n[f])try{r(p,f,n[f])}catch(m){p[f]=n[f]}}}},defa:function(t,e,a){"use strict";a.r(e);var s,i,n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[0===t.$store.state.level?a("fankuisum"):a("sugtown")],1)},r=[],o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"fankuisum"},[t._v(" 本月全区群众意见建议总量 "),a("router-link",{attrs:{to:{path:"/home/suggestion/sugtable",query:{type:"true"}}}},[a("span",{},[t._v("已处理反馈："),a("b",{staticClass:"yes"},[t._v(t._s(t.fkycl))]),t._v("条")])]),t._v(" "),a("router-link",{attrs:{to:{path:"/home/suggestion/sugtable",query:{type:"false"}}}},[a("span",{},[t._v("未处理反馈："),a("b",{staticClass:"no"},[t._v(t._s(t.fkwcl))]),t._v("条")])])],1),a("div",{staticStyle:{"margin-bottom":"16px"}},[a("el-row",{attrs:{gutter:10}},t._l(8,(function(e){return a("el-col",{key:"item"+e,attrs:{span:6}},[a("card",[a("p",{staticClass:"title",attrs:{slot:"title"},slot:"title"},[a("span",[t._v(t._s(t.chartDate.dataname[e-1]))])]),a("p",{staticClass:"main",attrs:{slot:"main"},slot:"main"},[a("router-link",{attrs:{to:{path:"/home/suggestion/sugtable",query:{type:"true",townid:t.townids[e-1]}}}},[a("span",{staticClass:"yes"},[t._v("已处理："+t._s(t.chartDate.data1[e-1])+"条")])]),a("router-link",{attrs:{to:{path:"/home/suggestion/sugtable",query:{type:"false",townid:t.townids[e-1]}}}},[a("span",{staticClass:"no"},[t._v("未处理："+t._s(t.chartDate.data2[e-1])+"条")])])],1)])],1)})),1)],1),a("el-row",[a("el-col",{attrs:{span:16}},[a("BaseCard2",[a("div",{attrs:{slot:"header"},slot:"header"},[t._v("本月各镇街道反馈处理柱状图")]),a("div",{attrs:{slot:"body"},slot:"body"},[a("div",{staticStyle:{height:"80vh"}},[a("bar02",{key:t.reloadbar02,attrs:{chartDate:t.chartDate}})],1)])])],1),a("el-col",{attrs:{span:8}},[a("BaseCard2",[a("div",{attrs:{slot:"header"},slot:"header"},[t._v("本月全区意见建议处理情况占比图")]),a("div",{attrs:{slot:"body"},slot:"body"},[a("div",{staticStyle:{height:"33vh"}},[a("pie02",{key:t.reloadpie02,attrs:{pie02data:t.pie02data}})],1)])]),a("BaseCard2",[a("div",{attrs:{slot:"header"},slot:"header"},[t._v("本月全区意见建议类型占比图")]),a("div",{attrs:{slot:"body"},slot:"body"},[a("div",{staticStyle:{height:"33vh"}},[a("pie01",{key:t.reloadpie01,attrs:{pie01data:t.pie01data}})],1)])])],1)],1)],1)},l=[],c=(a("4160"),a("159b"),a("1bab")),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cb",style:{"border-left":"4px solid "+t.borderColor[t.colorIndex]}},[a("div",{staticClass:"cordbody"},[t._t("title")],2),a("div",[t._t("main")],2)])},u=[],h={name:"card",data:function(){return{borderColor:["#7f2ac9","#026341","#01a068","#92fcd7","#009efc","#2f9649","#7f2ac9","#0242e3","#d8bbf5","#ffe43e","#ff96bc"]}},computed:{colorIndex:function(){return Math.floor(10*Math.random())}}},p=h,f=(a("2d14"),a("2877")),m=Object(f["a"])(p,d,u,!1,null,"44ecdf46",null),v=m.exports,b={},g=Object(f["a"])(b,s,i,!1,null,null,null),w=g.exports,y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"bar02",staticClass:"charts"})},_=[],k={name:"bar02",props:{chartDate:Object},mounted:function(){this.drawLine()},methods:{drawLine:function(){var t=this.$echarts.init(this.$refs.bar02);t.showLoading();var e=this;t.setOption({tooltip:{trigger:"axis",axisPointer:{type:"shadow",label:{show:!1}}},legend:{data:e.chartDate.legenddata,right:"6%"},grid:{left:"6%",right:"6%",bottom:"5%",containLabel:!0},yAxis:{type:"category",splitLine:{show:!1},inverse:!0,nameGap:40,data:e.chartDate.dataname,scale:!0,axisLine:{show:!1},axisTick:{show:!1}},xAxis:{type:"value",name:"条",nameGap:100,splitLine:{show:!1},show:!1},series:[{name:e.chartDate.legenddata[0],type:"bar",barMaxWidth:16,itemStyle:{emphasis:{barBorderRadius:10},normal:{barBorderRadius:10,shadowColor:"#cccccc",shadowBlur:20}},label:{normal:{show:!0,position:"right"}},data:e.chartDate.data1},{name:e.chartDate.legenddata[1],type:"bar",barMaxWidth:16,itemStyle:{emphasis:{barBorderRadius:5},normal:{barBorderRadius:10,shadowColor:"#cccccc",shadowBlur:10}},label:{normal:{show:!0,position:"right"}},data:e.chartDate.data2}],color:["#224abe","#9bb4ff"]}),t.hideLoading(),t.on("click",(function(t){console.log(t)})),window.addEventListener("resize",(function(){t.resize()}))}}},D=k,$=Object(f["a"])(D,y,_,!1,null,"134e4124",null),C=$.exports,x=a("ea2c"),S=a("9bbc"),O=a("5096"),j={name:"fankuisum",components:{card:v,gujia:w,bar02:C,BaseCard2:x["a"],pie02:S["a"],pie01:O["a"]},data:function(){return{townids:[],chartDate:{title:"",legenddata:["已处理","未处理"]},reloadbar02:"",pie02data:{name2:["资金","资产","资源","党务","村务","其他"],name3:"条数"},reloadpie02:"",pie01data:{name2:"条"},reloadpie01:"pie01",fkycl:0,fkwcl:0,showgujia:!0,gj:4,items:[]}},computed:{time:function(){var t=new Date,e=new Date;return e.setTime(e.getTime()-2592e6),[e,t]}},created:function(){this.getfeedback()},methods:{getfeedback:function(){var t=this;Object(c["f"])({join:"village,village.feedback",s:{"village.feedback.createdAt":{$between:[new Date(this.time[0]).toISOString(),new Date(this.time[1]).toISOString()]}}}).then((function(e){console.log(e);for(var a=[{value:0,name:"资金"},{value:0,name:"资产"},{value:0,name:"资源"},{value:0,name:"党务"},{value:0,name:"村务"},{value:0,name:"其他"}],s=[],i=[],n=[],r=function(r,o){s.push(t.$store.state.towns[r].zhenName),t.townids.push(t.$store.state.towns[r].zhenid),e.forEach((function(e){if(t.$store.state.towns[r].zhenid===e.id){var s=0,o=0;e.village.forEach((function(e){for(var i=0,n=e.feedback.length;i<n;i++)e.feedback[i].processed?(s++,t.fkycl++):(o++,t.fkwcl++),a[e.feedback[i].type].value++})),i.push(s),n.push(o)}})),i.length<s.length&&(i.push(0),n.push(0))},o=0,l=t.$store.state.towns.length;o<l;o++)r(o,l);t.$set(t.chartDate,"dataname",s),t.$set(t.chartDate,"data1",i),t.$set(t.chartDate,"data2",n),t.$set(t.pie02data,"data",a);var c=[{value:t.fkycl,name:"已处理"},{value:t.fkwcl,name:"未处理"}];t.$set(t.pie01data,"data",c),t.reloadbar02=(new Date).getTime(),t.reloadpie02=(new Date).getTime()}))}}},L=j,E=(a("c10f"),Object(f["a"])(L,o,l,!1,null,"76229f5e",null)),B=E.exports,T=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.showgujia&&0!==t.$store.state.level?t._e():a("div",{staticClass:"fankuisum"},[t._v(" 本月"+t._s(t.$store.state.townname)+"群众意见建议总量 "),a("span",{},[t._v("已处理反馈："),a("b",{staticClass:"yes"},[t._v(t._s(t.fkycl))]),t._v("条")]),t._v(" "),a("span",{},[t._v("未处理反馈："),a("b",{staticClass:"no"},[t._v(t._s(t.fkwcl))]),t._v("条")])]),a("div",{staticStyle:{"margin-bottom":"16px"}},[a("el-row",{attrs:{gutter:10}},t._l(t.itemlength,(function(e){return a("el-col",{key:"item"+e,attrs:{span:t.itemspan}},[a("card",[a("p",{staticClass:"title",attrs:{slot:"title"},slot:"title"},[a("span",[t._v(t._s(t.chartDate.dataname[e-1]))])]),a("p",{staticClass:"main",attrs:{slot:"main"},slot:"main"},[a("span",{staticClass:"yes"},[t._v("已处理："+t._s(t.chartDate.data1[e-1])+"条")]),t._v("/ "),a("span",{staticClass:"no"},[t._v("未处理："+t._s(t.chartDate.data2[e-1])+"条")])])])],1)})),1)],1),a("el-row",[a("el-col",{attrs:{span:16}},[a("BaseCard2",[a("div",{attrs:{slot:"header"},slot:"header"},[t._v("本月"+t._s(t.$store.state.townname)+"反馈处理柱状图")]),a("div",{attrs:{slot:"body"},slot:"body"},[a("div",{staticStyle:{height:"80vh"}},[a("bar02",{key:t.reloadbar02,attrs:{chartDate:t.chartDate}})],1)])])],1),a("el-col",{attrs:{span:8}},[a("BaseCard2",[a("div",{attrs:{slot:"header"},slot:"header"},[t._v("本月"+t._s(t.$store.state.townname)+"意见建议处理情况占比图")]),a("div",{attrs:{slot:"body"},slot:"body"},[a("div",{staticStyle:{height:"33vh"}},[a("pie02",{key:t.reloadpie02,attrs:{pie02data:t.pie02data}})],1)])]),a("BaseCard2",[a("div",{attrs:{slot:"header"},slot:"header"},[t._v("本月"+t._s(t.$store.state.townname)+"意见建议类型占比图")]),a("div",{attrs:{slot:"body"},slot:"body"},[a("div",{staticStyle:{height:"33vh"}},[a("pie01",{key:t.reloadpie01,attrs:{pie01data:t.pie01data}})],1)])])],1)],1)],1)},A=[],M=(a("d81d"),a("a434"),a("b0c0"),a("a9e3"),a("d3b7"),a("3ca3"),a("ddb0"),{name:"fankuisum",components:{card:v,gujia:w,bar02:C,BaseCard2:x["a"],pie02:S["a"],pie01:O["a"]},data:function(){return{townid:"6",itemspan:6,itemlength:0,villageids:[],villagenames:[],chartDate:{title:"",legenddata:["已处理","未处理"]},reloadbar02:"",pie02data:{name2:["资金","资产","资源","党务","村务","其他"],name3:"条数"},reloadpie02:"",pie01data:{name2:"条"},reloadpie01:"pie01",fkycl:0,fkwcl:0,showgujia:!0,gj:4,items:[]}},computed:{time:function(){var t=new Date,e=new Date;return e.setTime(e.getTime()-2592e6),[e,t]}},created:function(){this.getfeedback()},methods:{getfeedback:function(){var t=this;Object(c["x"])({join:"town",fields:"id,name",s:{"town.id":{$eq:Number(this.townid)}}}).then((function(e){switch(t.villageids.splice(0),t.villagenames.splice(0),t.itemlength=e.length,t.itemlength%4){case 0:t.itemspan=6;break;case 1:t.itemspan=8;break;case 2:t.itemspan=8;break;case 3:t.itemspan=6;break;default:break}var a=e.map((function(e){return t.villageids.push(e.id),t.villagenames.push(e.name),Object(c["e"])({fields:"type,processed",join:"village",s:{"village.id":{$eq:Number(e.id)},createdAt:{$between:[new Date(t.time[0]).toISOString(),new Date(t.time[1]).toISOString()]}}})}));Promise.all(a).then((function(e){console.log(e);var a=[{value:0,name:"资金"},{value:0,name:"资产"},{value:0,name:"资源"},{value:0,name:"党务"},{value:0,name:"村务"},{value:0,name:"其他"}],s=[],i=[];e.forEach((function(e){var n=0,r=0;e.forEach((function(e){e.processed?(n++,t.fkycl++):(r++,t.fkwcl++),a[e.type].value++})),s.push(n),i.push(r)})),t.$set(t.chartDate,"dataname",t.villagenames),t.$set(t.chartDate,"data1",s),t.$set(t.chartDate,"data2",i),t.$set(t.pie02data,"data",a);var n=[{value:t.fkycl,name:"已处理"},{value:t.fkwcl,name:"未处理"}];t.$set(t.pie01data,"data",n),t.reloadbar02=(new Date).getTime(),t.reloadpie02=(new Date).getTime()}))}))}}}),I=M,q=(a("9f7c"),Object(f["a"])(I,T,A,!1,null,"213b86a6",null)),z=q.exports,R={name:"suggestion",components:{fankuisum:B,sugtown:z}},N=R,G=Object(f["a"])(N,n,r,!1,null,null,null);e["default"]=G.exports},ea2c:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card"},[a("div",{staticClass:"card-header"},[t._t("header")],2),a("div",{staticClass:"card-body"},[t._t("body")],2)])},i=[],n={name:"BaseCard2"},r=n,o=(a("a2ef"),a("2877")),l=Object(o["a"])(r,s,i,!1,null,"054593fc",null);e["a"]=l.exports}}]);