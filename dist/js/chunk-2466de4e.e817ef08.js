(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2466de4e"],{"3ca3":function(e,t,a){"use strict";var n=a("6547").charAt,i=a("69f3"),s=a("7dd0"),l="String Iterator",r=i.set,c=i.getterFor(l);s(String,"String",(function(e){r(this,{type:l,string:String(e),index:0})}),(function(){var e,t=c(this),a=t.string,i=t.index;return i>=a.length?{value:void 0,done:!0}:(e=n(a,i),t.index+=e.length,{value:e,done:!1})}))},"7a9b":function(e,t,a){},"7ebd":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"card"},[a("div",{staticClass:"card-header"},[e._t("header")],2),a("div",{staticClass:"card-body"},[e._t("body")],2),a("div",{staticClass:"card-footer"},[e._t("footer")],2)])},i=[],s={name:"BaseCard"},l=s,r=(a("d13f"),a("2877")),c=Object(r["a"])(l,n,i,!1,null,"2f50af30",null);t["a"]=c.exports},a193:function(e,t,a){"use strict";a.r(t);var n,i,s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("fankuisum"),a("FeedbackTable")],1)},l=[],r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.showgujia&&1!==e.$store.state.level?e._e():a("div",{staticClass:"fankuisum"},[e._v(" "+e._s(e.time)+"全区群众意见建议总量 "),a("span",{},[e._v("已处理反馈："),a("b",{staticClass:"yes"},[e._v(e._s(e.fkycl))]),e._v("条")]),e._v(" "),a("span",{},[e._v("未处理反馈："),a("b",{staticClass:"no"},[e._v(e._s(e.fkwcl))]),e._v("条")])]),e.showgujia?e._e():a("el-row",{attrs:{gutter:10}},e._l(e.items,(function(t){return a("el-col",{key:t.id,attrs:{span:6}},[a("card",[a("p",{staticClass:"title",attrs:{slot:"title"},slot:"title"},[a("span",[e._v(e._s(t.name))])]),a("p",{staticClass:"main",attrs:{slot:"main"},slot:"main"},[a("span",{staticClass:"yes"},[e._v("已处理："+e._s(t.ycl)+"条")]),e._v("/ "),a("span",{staticClass:"no"},[e._v("未处理："+e._s(t.wcl)+"条")])])])],1)})),1)],1)},c=[],o=(a("d81d"),a("a9e3"),a("d3b7"),a("3ca3"),a("ddb0"),a("1bab")),d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"cb",style:{"border-left":"4px solid "+e.borderColor[e.colorIndex]}},[a("div",{staticClass:"cordbody"},[e._t("title")],2),a("div",[e._t("main")],2)])},u=[],m={name:"card",data:function(){return{borderColor:["#7f2ac9","#026341","#01a068","#92fcd7","#009efc","#2f9649","#7f2ac9","#0242e3","#d8bbf5","#ffe43e","#ff96bc"]}},computed:{colorIndex:function(){return Math.floor(10*Math.random())}}},h=m,p=(a("b4d1"),a("2877")),f=Object(p["a"])(h,d,u,!1,null,"8ae74f98",null),v=f.exports,b={},g=Object(p["a"])(b,n,i,!1,null,null,null),w=g.exports,_={name:"fankuisum",components:{card:v,gujia:w},data:function(){return{items:[{name:"name",id:"id",ycl:12,wcl:13},{name:"name",id:"id",ycl:12,wcl:13},{name:"name",id:"id",ycl:12,wcl:13},{name:"name",id:"id",ycl:12,wcl:13},{name:"name",id:"id",ycl:12,wcl:13},{name:"name",id:"id",ycl:12,wcl:13},{name:"name",id:"id",ycl:12,wcl:13},{name:"name",id:"id",ycl:12,wcl:13}],fkycl:0,fkwcl:0,showgujia:!0,gj:4}},computed:{time:function(){return(new Date).getFullYear()+"年"+((new Date).getMonth()+1)+"月"}},created:function(){},methods:{getfeedback:function(){var e=this.$store.state.towns.map((function(e){return Object(o["d"])({join:"town",s:{"town.id":{$eq:Number(e.zhenid)}}})}));Promise.all(e).then((function(e){console.log(e)}))}}},y=_,k=(a("a9ce"),Object(p["a"])(y,r,c,!1,null,"0aad6914",null)),C=k.exports,x=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("BaseCard",[a("div",{attrs:{slot:"header"},slot:"header"},[a("SearchFeedback",{on:{searchFeedback:e.searchFeedback}})],1),a("div",{attrs:{slot:"body"},slot:"body"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{type:"expand",data:e.tableData,border:"",height:"80vh"}},[a("el-table-column",{attrs:{fixed:"",prop:"title",label:"意见建议标题",width:"150"}}),a("el-table-column",{attrs:{prop:"name",label:"建议人",width:"120"}}),a("el-table-column",{attrs:{prop:"time",sortable:"",label:"提交时间",width:"120"}}),a("el-table-column",{attrs:{prop:"content",label:"内容",width:"auto"}}),a("el-table-column",{attrs:{prop:"handler",label:"处理人",width:"120"}}),a("el-table-column",{attrs:{prop:"status",label:"状态",width:"120"}}),a("el-table-column",{attrs:{prop:"index",fixed:"right",label:"操作",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleClick(t.row)}}},[e._v("查看")])]}}])})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-sizes":[16,20,50,100],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showcard,expression:"showcard"}],staticClass:"mask",on:{click:e.hidenMask}},[a("div",{staticClass:"centerbody"},[e._t("centerbody",[a("BaseCard2",[a("div",{attrs:{slot:"header"},slot:"header"},[e._v(" "+e._s(e.itemdata.title)+" "),a("span",{staticClass:"littlespan"},[e._v(e._s(e.itemdata.time))])]),a("div",{attrs:{slot:"body"},slot:"body"},[a("div",{staticClass:"cardcontent"},[e._v(" 意见建议人： "),a("span",[e._v(e._s(e.itemdata.name))])]),a("div",{staticClass:"cardcontent"},[e._v(" 意见建议内容: "),a("span",[e._v(e._s(e.itemdata.content))]),e._l(e.itemdata.img,(function(e){return a("el-image",{key:e,attrs:{src:e,lazy:""}})}))],2),a("div",{staticClass:"cardcontent"},[e._v(" 意见建议处理行政级别： "),a("span",[e._v(e._s(e.itemdata.status))])]),a("div",{staticClass:"cardcontent"},[e._v(" 意见建议处理人 "),a("span",[e._v(e._s(e.itemdata.handler))])]),a("div",{staticClass:"cardcontent"},[e._v(" 意见建议处理结果： "),a("span",[e._v(e._s(e.itemdata.handlRes))])]),a("div",{staticClass:"cardcontent"},[e._v(" 向上级反馈附带信息 "),a("span",[e._v(e._s(e.itemdata.upMessage))])]),a("div",{staticClass:"cardcontent"},[e._v(" 退回反馈附带信息 "),a("span",[e._v(e._s(e.itemdata.downMessage))])])])])])],2)])],1)},z=[],j=(a("a434"),a("b0c0"),a("0c58")),S=a("7ebd"),O=a("ea2c"),$=a("1b72"),D=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._v(" "+e._s(e.areaname)+": "),1!=e.$store.state.level?a("el-select",{attrs:{disabled:"",size:e.size,placeholder:"请选择镇/街道"},model:{value:e.townid,callback:function(t){e.townid=t},expression:"townid"}},e._l(e.towns,(function(e){return a("el-option",{key:"town"+e.id,attrs:{label:e.zhenName,value:e.zhenid}})})),1):a("el-select",{attrs:{size:e.size,placeholder:"请选择镇/街道"},model:{value:e.townid,callback:function(t){e.townid=t},expression:"townid"}},e._l(e.towns,(function(e){return a("el-option",{key:"town"+e.id,attrs:{label:e.name,value:e.id}})})),1),a("el-select",{attrs:{size:e.size,placeholder:"请选择行政村"},model:{value:e.villageid,callback:function(t){e.villageid=t},expression:"villageid"}},e._l(e.villages,(function(e){return a("el-option",{key:"village"+e.id,attrs:{label:e.name,value:e.id}})})),1),a("el-select",{attrs:{size:e.size,placeholder:"请选择处理状态"},model:{value:e.processed,callback:function(t){e.processed=t},expression:"processed"}},e._l(e.processeds,(function(e){return a("el-option",{key:"processed"+e.value,attrs:{label:e.label,value:e.value}})})),1),a("el-select",{attrs:{size:e.size,placeholder:"请选择类型"},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},e._l(e.types,(function(e){return a("el-option",{key:"type"+e.id,attrs:{label:e.name,value:e.id}})})),1),a("el-date-picker",{attrs:{size:e.size,type:"monthrange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始月份","end-placeholder":"结束月份","picker-options":e.pickerOptions,change:"changetime"},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}}),a("el-button",{attrs:{type:"primary",size:e.size},on:{click:e.onSubmit}},[e._v("搜索")])],1)},M=[],N=(a("25f0"),{name:"SearchFeedback",data:function(){return{size:"mini",townid:"0",villages:[],villageid:"0",type:"6",types:[{id:"6",name:"全部"},{id:"0",name:"资金"},{id:"1",name:"资产"},{id:"2",name:"资源"},{id:"3",name:"党务"},{id:"4",name:"村务"},{id:"5",name:"其他"}],processed:"0",time:"",processeds:[{value:"0",label:"全部"},{value:"true",label:"已处理"},{value:"false",label:"未处理"}],pickerOptions:{shortcuts:[{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近一年",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-31536e6),e.$emit("pick",[a,t])}}]}}},computed:{areaid:function(){return Number(this.$store.state.areaid)},areaname:function(){return this.$store.state.areaname},towns:function(){var e=this.$store.state.towns.map((function(e){return{id:e.zhenid.toString(),name:e.zhenName}}));return e}},created:function(){this.townid=this.$store.state.townid.toString(),this.villageid=this.$store.state.villageid.toString(),this.getvillages(this.townid);var e=new Date,t=new Date;t.setTime(t.getTime()-2592e6),this.time=[t,e],this.onSubmit()},methods:{gettowns:function(e){Object(o["p"])({join:"area",s:{"area.id":{$eq:Number(e)}}}).then((function(e){console.log(e)}))},getvillages:function(e){var t=this;Object(o["w"])({join:"town",s:{"town.id":{$eq:Number(e)}}}).then((function(e){t.villages=e.map((function(e){return{id:e.id.toString(),name:e.name}}))}))},onSubmit:function(){this.$emit("searchFeedback",this.villageid,this.processed,this.type,this.time)}},watch:{townid:function(e){this.getvillages(this.townid)},time:function(e){}}}),F=N,T=Object(p["a"])(F,D,M,!1,null,null,null),E=T.exports,B={name:"FeedbackTable",components:{BaseCard:S["a"],themask:$["a"],BaseCard2:O["a"],SearchFeedback:E},data:function(){return{pageSize:16,currentPage:1,total:0,pageCount:1,tableData:[],itemdata:{},loading:!0,showcard:!1,time:"",type:"",processed:"",villageid:""}},created:function(){},methods:{getfeedbacks:function(){var e=this;this.loading=!0;var t={};"0"!=this.processed&&(t["processed"]=Boolean(this.processed)),"6"!=this.type&&(t["type"]=Number(this.type)),t["village.id"]={$eq:Number(this.villageid)},t["createdAt"]={$between:[new Date(this.time[0]).toISOString(),new Date(this.time[1]).toISOString()]},t["village.id"],Object(o["d"])({limit:this.pageSize,page:this.currentPage,join:"village,villager,handler",s:t}).then((function(t){console.log(t),e.loading=!1,e.pageCount=t.pageCount,e.total=t.total,e.tableData.splice(0),e.tableData=t.data.map((function(e,t){console.log(t);var a,n=e.villager.name;e.anonymous,null!=e.relatedDocuments&&(a=e.relatedDocuments.map((function(e){return e.url})));var i="";switch(e.status){case 0:i="村级处理";break;case 1:i="镇级处理";break;case 2:i="区级处理";break;default:i="--";break}var s="处理中...";return null!=e.handler&&(s=Object(j["c"])(e.handler.name)),{id:e.id,index:t,title:Object(j["c"])(e.title),name:Object(j["c"])(n),time:Object(j["a"])(new Date(e.createdAt),"yyyy-MM-dd"),content:Object(j["c"])(e.content),status:i,handler:s,handlRes:Object(j["c"])(e.handlRes),upMessage:Object(j["c"])(e.upMessage),downMessage:Object(j["c"])(e.downMessage),img:a}}))}))},searchFeedback:function(e,t,a,n){this.time=n,this.type=a,this.processed=t,this.villageid=e,this.getfeedbacks()},handleClick:function(e){console.log(e.index),this.itemdata=this.tableData[Number(e.index)],this.showcard=!0},handleSizeChange:function(e){this.pageSize=Number(e),this.page=1,this.getfeedbacks()},handleCurrentChange:function(e){this.currentPage=Number(e),this.page=Number(e),this.getfeedbacks()},handleClose:function(e){this.$confirm("确认关闭？").then((function(t){e()})).catch((function(e){}))},hidenMask:function(){this.showcard=!1}}},A=B,I=Object(p["a"])(A,x,z,!1,null,null,null),P=I.exports,q={name:"suggestion",components:{fankuisum:C,FeedbackTable:P}},R=q,J=Object(p["a"])(R,s,l,!1,null,null,null);t["default"]=J.exports},a2ef:function(e,t,a){"use strict";var n=a("7a9b"),i=a.n(n);i.a},a434:function(e,t,a){"use strict";var n=a("23e7"),i=a("23cb"),s=a("a691"),l=a("50c4"),r=a("7b0b"),c=a("65f0"),o=a("8418"),d=a("1dde"),u=a("ae40"),m=d("splice"),h=u("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,f=Math.min,v=9007199254740991,b="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!m||!h},{splice:function(e,t){var a,n,d,u,m,h,g=r(this),w=l(g.length),_=i(e,w),y=arguments.length;if(0===y?a=n=0:1===y?(a=0,n=w-_):(a=y-2,n=f(p(s(t),0),w-_)),w+a-n>v)throw TypeError(b);for(d=c(g,n),u=0;u<n;u++)m=_+u,m in g&&o(d,u,g[m]);if(d.length=n,a<n){for(u=_;u<w-n;u++)m=u+n,h=u+a,m in g?g[h]=g[m]:delete g[h];for(u=w;u>w-n+a;u--)delete g[u-1]}else if(a>n)for(u=w-n;u>_;u--)m=u+n-1,h=u+a-1,m in g?g[h]=g[m]:delete g[h];for(u=0;u<a;u++)g[u+_]=arguments[u+2];return g.length=w-n+a,d}})},a892:function(e,t,a){},a9ce:function(e,t,a){"use strict";var n=a("e4d1c"),i=a.n(n);i.a},b4d1:function(e,t,a){"use strict";var n=a("a892"),i=a.n(n);i.a},d13f:function(e,t,a){"use strict";var n=a("f25b"),i=a.n(n);i.a},d81d:function(e,t,a){"use strict";var n=a("23e7"),i=a("b727").map,s=a("1dde"),l=a("ae40"),r=s("map"),c=l("map");n({target:"Array",proto:!0,forced:!r||!c},{map:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},ddb0:function(e,t,a){var n=a("da84"),i=a("fdbc"),s=a("e260"),l=a("9112"),r=a("b622"),c=r("iterator"),o=r("toStringTag"),d=s.values;for(var u in i){var m=n[u],h=m&&m.prototype;if(h){if(h[c]!==d)try{l(h,c,d)}catch(f){h[c]=d}if(h[o]||l(h,o,u),i[u])for(var p in s)if(h[p]!==s[p])try{l(h,p,s[p])}catch(f){h[p]=s[p]}}}},e4d1c:function(e,t,a){},ea2c:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"card"},[a("div",{staticClass:"card-header"},[e._t("header")],2),a("div",{staticClass:"card-body"},[e._t("body")],2)])},i=[],s={name:"BaseCard2"},l=s,r=(a("a2ef"),a("2877")),c=Object(r["a"])(l,n,i,!1,null,"054593fc",null);t["a"]=c.exports},f25b:function(e,t,a){}}]);